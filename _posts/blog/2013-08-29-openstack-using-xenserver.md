---layout: posttitle: 在OpenStack使用XenServer资源池浅析description: 在OpenStack使用XenServer资源池浅析category: blog---OpenStack中的Xen driver类：nova/virt/xenapi/driver.py中的XenAPIDriver类，该类继承的ComputeDriver是所有driver的基类，是所有虚拟机相关功能集合，而XenAPIDriver实现的方法是ComputeDriver类中方法的子集。### 创建资源池并添加主机使用xenserver资源池（支持虚拟机热迁移）前提：  1. 有符合创建资源池的xenserver主机，已部署openstack（nova-compute）  2. 有共享存储步骤：  1. 在master节点（注意:此时还没有资源池，master节点是我们预定义的某节点）上配置共享存储为默认SR  2. 配置所有的slave节点使用该默认SR，通过配置项`sr_matching_filter=default-sr:true`  3. 将master节点加入aggregate    nova aggregate-add-host <aggregate-id> <name-of-master-compute>